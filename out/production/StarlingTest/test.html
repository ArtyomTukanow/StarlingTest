<!DOCTYPE html>
<html>
<head>
    <title>test</title>
</head>
<body>
<script src="https://vk.com/js/api/xd_connection.js?2"  type="text/javascript"></script>

    <object id="test" wmode="direct" width="663" height="573">
        <param name="allowScriptAccess" value="sameDomain" />
        <param name="movie" value="test.swf">
        <embed src="test.swf" width="663" height="573" name="test" allowScriptAccess="sameDomain"/>
    </object>
    <script type="text/javascript">
        function traceMessage(message) {
            document['test'].localTrace(message);
        }

        function initVK() {
            VK.init(function() {
                document['test'].successfulInit();
            }, function() {
                alert('API initialization failed. Please, reload app');
            }, '5.85');
        }

        function showRequestBox(userId, message, requestKey, onRequestSuccessCallbackId, onRequestCancelCallbackId) {
            VK.addCallback('onRequestSuccess', function f(location){
                document['test'].successfulRequest(onRequestSuccessCallbackId, null);
            });
            VK.addCallback('onRequestCancel', function f(location){
                document['test'].successfulRequest(onRequestCancelCallbackId, null);
            });
            VK.callMethod("showRequestBox", userId, message, requestKey);
        }

        function showInviteBox(callbackId) {
            VK.addCallback('onRequestSuccess', function f(location){
                document['test'].successfulRequest(onRequestSuccessCallbackId, null);
            });
            VK.addCallback('onRequestCancel', function f(location){
                document['test'].successfulRequest(onRequestCancelCallbackId, null);
            });
            VK.callMethod("showRequestBox", userId, message, requestKey);
        }

        function vkApi(methodName, params, callbackId) {
            VK.api(methodName, params, function(data) {
                document['test'].successfulRequest(callbackId, data);
            });
        }

        function Alert(message) {
            alert(message);
        }
    </script>
</body>
</html>